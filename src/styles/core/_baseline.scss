::-moz-selection {
	background: var(--site-background-selection);
}

::selection {
	background: var(--site-background-selection);
}

::placeholder {
	color: var(--site-color-text-c0);
}

::marker {
	color: var(--site-color-marker);
}

* {
	box-decoration-break: clone;
	scrollbar-color: var(--site-color-scrollbar) var(--site-background-scrollbar);

	&::-webkit-scrollbar,
	&::-webkit-scrollbar-track {
		background-color: var(--site-background-scrollbar);
	}

	&::-webkit-scrollbar-thumb {
		background-color: var(--site-color-scrollbar);
	}
}

:where(html) {
	// controls accent colors on input and progress elements
	accent-color: var(--site-adaptive-color-link);
	caret-color: var(--site-adaptive-color-link);
}

:is(
	::-webkit-calendar-picker-indicator,
	::-webkit-clear-button,
	::-webkit-inner-spin-button,
	::-webkit-outer-spin-button
) {
	color: var(--site-adaptive-color-link);
}

:where(a[href], area, button, input, label[for], select, summary, textarea, [tabindex]:not([tabindex*='-'])),
:where(input[type='file']):is(::-webkit-file-upload-button, ::file-selector-button) {

	// handle focus from keyboard or tab key
	// see https://www.tpgi.com/focus-visible-and-backwards-compatibility/
	&:focus-visible {
		outline-color: var(--site-color-link-hover);
		outline-style: solid;
		outline-width: var(--site-line-thickness-base);
		outline-offset: var(--site-line-offset-base);
	}
}

// hide the web components until they are defined
:not(:defined),
:where(p):empty {
	display: none;
}

:where(body) {
	font-family: var(--site-font-body);
	font-size: var(--site-text-base);
	font-weight: var(--site-font-regular);
	font-kerning: normal;
	font-optical-sizing: auto;
	text-rendering: optimizeLegibility;
	background-color: var(--site-background-body);
	color: var(--site-color-text);
	// see https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-overflow-scrolling
	-webkit-overflow-scrolling: touch;
}

:where(a) {
	--site-anchor-decoration-style: dotted;
	--site-anchor-decoration-size: var(--site-decoration-thin);

	color: var(--site-adaptive-color-link);
	cursor: pointer;
	text-decoration-line: underline;
	// keep the underline offset consistent across browsers
	text-underline-position: from-font;
	text-decoration-style: var(--site-anchor-decoration-style);
	text-decoration-skip-ink: auto;
	text-decoration-thickness: var(--site-anchor-decoration-size);

	* {
		color: currentColor;
	}

	// handle focus received from mouse etc
	&:is(:focus:not(:focus-visible), :hover, :active) {
		--site-anchor-decoration-style: solid;
		--site-anchor-decoration-size: var(--site-decoration-base);
	}

	// handle focus from keyboard or tab key
	// see https://www.tpgi.com/focus-visible-and-backwards-compatibility/
	&:focus-visible {
		text-decoration-color: transparent;
		border-radius: var(--site-radius-tiny);
	}
}

:where(cite) {
	font-style: italic;
}

:where(blockquote) {
	padding: 0 0 0 1em;
	border-inline-start: 3px solid var(--site-color-text-c2);
	color: var(--site-color-text-c2);
}

:where(hr) {
	background-color: var(--site-border-body);
	border: none;
	display: block;
	block-size: var(--site-line-thickness-thin);
	margin-block: var(--site-vgap-base);
}

:where(mark, del, ins) {
	border-radius: var(--site-radius-small);
	padding: 0.2ch 0.6ch;
	font-size: 0.95em;
}

:where(del) {
	background-color: var(--site-background-del);
	text-decoration-line: line-through;
}

:where(ins) {
	background-color: var(--site-background-ins);
	text-decoration: none;
}

:where(mark) {
	background-color: var(--site-background-mark);
	color: var(--site-color-text-c2);
}

:where(summary) {
	display: list-item;
}

:where(details) {
	display: block;
	border: 1px solid var(--site-border-body);
	border-radius: var(--site-radius-base);
	padding: 0 0.75em 0;

	summary {
		background-color: var(--site-background-summary);
		margin: 0 -0.75em 0;
		padding: 0.5em 0.75em;
		border-radius: var(--site-radius-base);
		cursor: pointer;

		// handle focus from keyboard or tab key
		// see https://www.tpgi.com/focus-visible-and-backwards-compatibility/
		&:focus-visible {
			border-radius: var(--site-radius-base);
		}
	}

	&[open] {
		padding-block-end: 0.5em;

		summary {
			margin-block-end: 0.5em;
			border-block-end: 1px solid var(--site-border-body);
			border-end-start-radius: 0;
			border-end-end-radius: 0;
		}
	}
}

:where(i, em) {
	color: var(--site-color-text-c2);
}

:where(b, strong) {
	font-weight: var(--site-font-bold);
	color: var(--site-color-text-c1);
}

:where(small, sub, sup) {
	font-size: 0.8em;
}

:where(sub) {
	vertical-align: sub;
}

:where(sup) {
	vertical-align: super;
}

:where(var) {
	letter-spacing: 0.1ch;
}

:where(img) {
	border-radius: var(--site-radius-base);
}

:where(figure) {
	text-align: center;
}

:where(figcaption) {
	font-size: 0.8em;
	margin-block-start: var(--site-vgap-base);
	color: var(--site-color-text-c0);
}

:where(p, dl, ol, ul, aside, blockquote, figure, pre, table):not(:last-child) {
	margin-block-end: var(--site-vgap-base);
}

:is(h1, h2, h3, h4, h5, h6) {
	font-weight: var(--site-font-bold);
	margin-block-start: 2em;
	margin-block-end: 1em;

	& + :is(h1, h2, h3, h4, h5, h6) {
		margin-block-start: 0;
	}

	&:is(:first-child, :only-child) {
		margin-block-start: 0;
	}
	
	&:is(:last-child, :only-child) {
		margin-block-end: 0;
	}
}

:where(h1) {
	font-size: 2.5rem;
	color: var(--site-color-text-c1);
}

:where(h2) {
	font-size: 2rem;
	color: var(--site-color-text-c2);
}

:where(h3) {
	font-size: 1.5rem;
}

:where(h4) {
	font-size: 1.25rem;
}

:where(h5) {
	font-size: 1.125rem;
}

:where(h6) {
	font-size: 0.95rem;
}

:where(menu) {
	list-style: none;
}

:where(ol, ul) {
	list-style-position: outside;
}

:where(dd) {
	margin-inline-start: 2ch;
}

:where(dt) {
	font-weight: var(--site-font-bold);
}

:where(li) {
	& > *:not(:last-child) {
		margin-block-end: 0.6rem;
	}

	& + li,
	& > :last-child > li {
		margin-block-start: 0.6rem;
	}
}

:where(button, input, textarea, select),
:where(input[type='file']):is(::-webkit-file-upload-button, ::file-selector-button) {
	outline-color: var(--site-adaptive-color-link);
	border-color: var(--site-adaptive-border-link);
	background-color: var(--site-adaptive-background-link);
}

:where(code, kbd, samp, pre) {
	font-family: var(--site-font-mono);
	font-size: 0.85em;
	-moz-osx-font-smoothing: auto;
	-webkit-font-smoothing: auto;
	background-color: var(--site-background-code);
	border-radius: var(--site-radius-small);
}

:where(code, kbd, samp) {
	padding: 0.2ch 0.6ch;
	color: var(--site-color-code);
}

:where(pre) {
	overflow: hidden;
	border-radius: var(--site-radius-base);

	code {
		display: block;
		background: none;
		overflow: auto;
		border: none;
		padding: 1em 1.2em;
		font-size: 1em;
		white-space: pre;
	}
}

:where(table) {
	display: block;
	width: 100%;
	overflow-x: auto;

	pre {
		white-space: pre-wrap;
	}
}

:where(th) {
	font-weight: var(--site-font-bold);
}

:where(th, td) {
	font-size: 1em;
	padding: 0.25rem 0.75rem;
	border: 1px solid var(--site-border-body);
}

:where(thead, tfoot) {
	tr {
		background-color: var(--site-background-table-active);
	}

	th,
	td {
		color: var(--site-color-table-active);

		code {
			background-color: var(--site-background-table);
		}
	}
}

:where(tbody) {
	tr {
		background-color: var(--site-background-table);
	}
}
